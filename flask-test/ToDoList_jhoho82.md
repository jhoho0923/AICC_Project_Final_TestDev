- [x] 2400624(화) 그간 작업한 내용 총 정리:
  # 본인의 개발 업무 
  ## 총정리: 
  저희 개발 인원은 총 5명으로 박원빈(팀장), 김여진, 최원호, 이정훈, 정승홐(본인) 이렇게 총 5몀으로 팀원이 구성되었으며, 본인이
  담당한 개발업무는 우리 프로젝트의 서비스중 AI와 소통 창구를 구현하기 위한, 메세지 서비스 및 채팅 서비스를 구현 하였습니다. 
  프로그램의 구현방식은 ChatGPT를 연동하여, GPT에서 제공하는 어시스던트아이디(AsisstantID)를 제공받아, AI 상담 서비스를 위해 
  필요한 쓰레드아이디(채팅 ID)를 새롭게 Create하여, SSR 방식으로 python소스코드에서 FE(FrontEnd Side) 요청과 화면쪽에서 요청한
  데이터의 배열값들을 [], Flask서버에서 응답받아 JSON형태로 응답 메세지를 돌려주는 형식으로 개발을 진행 하였습니다. 
  프론트앤드는 HTML Document(컴포넌트들)요소를 랜더링해주고, 필요한 데이터를 저장할수 있는 useSate([''])함수를 이용하여, 속성값을 설정할수 있는 React 기반의 자바스크립트 라이브러리API를 사용하여 화면 서비스를 개발하였습니다. 또한 GPT를 사용하기위해
  유니크한 보안키인 Open ApiKey를 load_dotenv 모듈을 적용하여 os.getenv("OPEN_API_KEY_DECODING") 함수를 사용하므로, .env 파일에 보안키를 저장해 불특정 사용자에게 파일 소스관리시 외부에서 공개키 노출을 예방하기위해 보안적용을 하였습니다. 또한 사용자가 입력한 Message 내용을 채팅문자 메세지을 입력할때마다 Oracle DataBase DBMS를 시스템을 이용하여, 프론트앤드쪽에서 
  커넥션 풀링 방식으로 async비동기방식인 fetch(), axios()함수를 호출하고, 파이썬 서버쪽으로 엔드포인트를 flask에 요청하면, Oracle 데이터베이스에 sql구문을 처리하여 메세지 정보 테이블에 저장할수 있도록 마치 Spring 프레임워트의 MVC모델 패턴구조로 개발을 진행하였습니다. 여기서 한가지 주목해야 할 점은 html 요소에서 form태그로 Submit을 보내게 되면, 일반적인 요청 구조로는 서버쪽에 url요청을 한번만 보내지만, 여기서 자바스크립트의  비동기 await 방식으로 데이터를 Request Body에 저장해 보낼수있는 POST 방식이며, 여러 리퀘스트 정보를 한꺼번에 호출할 수 있는 Promise.all(.post({URL_1, sendData}), .post({URL_2, sendData}), .post({URL_3, sendData})) 함수를 사용하여 여러 서버로 보내는 요청주소를 일괄적으로 동시에 처리할 수 있게 끔 메세지 클라이언트 요청 서비스 프로그램을 개발업무를 진행하였습니다. DB 채팅방 메세지 정보 테이블에 저장된 데이터는 GPT에서 상담을 서브적으로 서포팅 워킹을 할수 있게끔 도와주는 GPT에서 발급된 Asisstant_Id와 채팅방을 새로 생성해주는 Thread_Id 이렇게 2가지 정보를 Data Rows[] 값들에 저장할 수있게 작업을 절차적으로 구현하였습니다. 
  GPT 어시스턴트 아이디와 공개키를 AI를 사용하기위해 이용하고, 각각 한개의 Session 키값이 생성될때 파일 시스템을 이용하여 프로젝트 폴더에 파일시스템='filesystem' 정의하여 저장할수 있게 있도록 작업을 진행하였습니다.
  ```python 
  app.config['SESSION_TYPE'] = os.getenv("FILE_SYSTEM") # 세션 데이터를 파일 시스템에 저장
  ``` 
  # 이 부분도 중요정보의 외부 노출을 막기 위해 .env 파일에 변수명을 저장하여 보안소스를 적용하였습니다. 
  ## 오라클 데이터베이스 사용자이름 및 데이터메이스 계정정보 연결은 Cx_Oracle 모듈을 적용하여 정의하였습니다. 
  오라클 데이터 베이스 DB 테이블의 해당 튜플의 값들은 모두 공개적으로 외부에 노출시 보안의 심각한 위험을 초래하기에 이에 관련하여 DB에 데이터 값들을 차례대로 적재시 일반적으로 데이터 타입을 일반 Char문자열을 저장할수 있는 VARCHAR2 형태가 아닌, 'RAW'타입라는 이미지나 파일 비디오 같은 비정형 데이터를 저장할 수 있는 이진데이터 타입으로 설정하여, 관련 테이블을 DECLARE.... BEGIN... END;  구문으로 쓰여져 있는 익명 블록(Anonymous Block)을 선언하여 메세지 저장 테이블에 즉, 어시스턴트아이디('asisstant_id')를 보안화해 순수 이진데이터를 저장할수 있도록 새롭게 구성 하였습니다. 해당 데이터는 DBMS_CRYPTO 암호와 패키지 활성화 즉 익명블럭으로 구문을 생성하여 이진데이터를 암호화를 거쳐 데이터베이스에 저장할수 있도록 보안을 신경써서 구성을 하였습니다. 
  다음은 DBMS_암호화 익명블럭 패키지 생성 sql구문입니다. 
  ```sql
  -- DBMS_CRYPTO 패키지 활성화
    SET SERVEROUTPUT ON;
    DECLARE
      l_key       RAW(128) := UTL_RAW.cast_to_raw('YourSecretKey'); -- 암호화 키
      l_iv        RAW(128) := UTL_RAW.cast_to_raw('InitializationVector'); -- 초기화 벡터
      l_data      VARCHAR2(50) := '쓰레드 아이디 입력'; -- 암호화할 데이터
      l_encrypted RAW(2000); -- 암호화된 데이터를 저장할 변수
    BEGIN
      -- 데이터 암호화
      l_encrypted := DBMS_CRYPTO.encrypt(
                      src => UTL_RAW.cast_to_raw(l_data),
                      typ => DBMS_CRYPTO.des_cbc_pkcs5,
                      key => l_key,
                      iv  => l_iv
                    );
      -- 암호화된 데이터 출력
      DBMS_OUTPUT.put_line('Encrypted Data: ' || UTL_RAW.cast_to_varchar2(l_encrypted));

      -- 암호화된 데이터를 저장하는 SQL 문
      INSERT INTO security_info_new (thread_id, assistant_id)
      VALUES (l_encrypted, UTL_RAW.cast_to_raw('어시스턴트 아이디 입력'));
      
      -- 암호화된 데이터를 저장하는 SQL 문
      INSERT INTO security_info_old (thread_id, assistant_id)
      VALUES (l_encrypted, UTL_RAW.cast_to_raw('어시스턴트 아이디 입력'));
    END;
    /
  ```
  메시지 정보는 함수를 호출해서 서버에서 assistant_id 를 받고, 데이터가 안전하게 저장되는 형식으로 소스코드를 구현하였습니다. 

  ## 인공지능 서비스의 우리 프로젝트의 서비스의 주 목적은 부동산 전세사기 수법에 관련한 예방 상담봇을 만드는 것이었습니다. 
  임의의 사용자의 페르소나 기법으로 가상의 사용자를 작성해봤습니다 사용자의 임의의 정보는 이렇습니다.
  페르소나 1: 신혼부부
    이름: 김영수
    나이: 32세
    직업: 회사원
    결혼 상태: 신혼
    소득: 연간 5천만 원
    거주지: 서울
    목표: 첫 집을 전세로 구하고 싶다.
    고민: 전세 계약에 대한 경험이 없고, 전세 사기 사례를 많이 들어서 불안하다.
    필요: 안전한 전세 계약 방법, 사기 방지 체크리스트, 신뢰할 수 있는 중개업체 추천.
    행동 패턴: 주말에 집을 보러 다니고, 온라인 부동산 커뮤니티에서 정보를 찾는다.

    페르소나 2: 1인 가구 청년
    이름: 양지은
    나이: 27세
    직업: 스타트업 직원
    결혼 상태: 미혼
    소득: 연간 3천만 원
    거주지: 인천
    목표: 회사 근처에서 전세로 살 집을 찾고 싶다.
    고민: 임대차 계약에 익숙하지 않고, 전세 사기에 대한 두려움이 있다.
    필요: 전세 계약 시 주의사항, 법적 보호 방법, 사기 사례 및 예방책 정보.
    행동 패턴: 출퇴근 시간에 모바일로 부동산 정보를 검색하고, SNS에서 의견을 나눈다.

    페르소나 3: 은퇴한 부부
    이름: 박정자
    나이: 65세
    직업: 은퇴
    결혼 상태: 기혼
    소득: 연금 및 저축으로 생활
    거주지: 부산
    목표: 자녀와 가까운 곳으로 이사하고 싶다.
    고민: 고정 소득이 한정되어 있어 전세 사기를 당할 경우 경제적으로 큰 타격을 입을 수 있다.
    필요: 안전한 계약 절차, 신뢰할 수 있는 부동산 중개인, 법적 조언.
    행동 패턴: 자녀들과 함께 정보를 수집하고, 직접 부동산 중개업소를 방문한다.

    페르소나 4: 40대 가장
    이름: 정민호
    나이: 40세
    직업: 중견기업 부장
    결혼 상태: 기혼
    자녀: 2명 (초등학생, 중학생)
    소득: 연간 8천만 원
    거주지: 경기 성남시
    목표: 아이들 교육환경이 좋은 곳으로 이사하고 싶다.
    고민: 가족의 안전과 경제적 안정성을 위해 전세 사기를 방지하고 싶다.
    필요: 안정적인 전세 계약 방법, 학군과 교통 편의를 고려한 안전한 지역 정보, 전세 보증금 반환 보장 방법.
    행동 패턴: 주말에 가족과 함께 집을 보러 다니고, 온라인 부동산 포털 사이트를 자주 확인하며, 부동산 전문가와 상담한다.

  우리는 부동산, 임대차 사업자, 업주, 공인중개사, 임대인, 임차인등 여러 사람들이 실제로 겪은 부동산 법률 위반 사기수법에 대해 조사를 하였고, 결론은 GPT에게 관련 문장이나 키워드, 또는 제약조건을 제시하면 에방책에 대한 정보를 사용자애개 편리하게 제공하는 것을 확인하였고, 이에 따른 기술적 구현에서 채팅 상담 서비스를 사용하기 위해 사용자가 AI 인공지능에게 문의를 한 내용(Message_Content 라고 정보 주체를 가정하였을때) 즉, 예를 들어 어떤어떤 사기수법에 대해 알고 싶다라고 메시지를 입력하면 문의 내용은 자연스럽게 자연어처리를 하는 과정을 거쳐 해당내용의 심각한 정도를 표시 할수있게 끔 작업을 진행 하였습니다. 그 기능을 구현하기 위해서 단어처리를 도와줄 수 있는 이른바 사기수법 단어사전 및 부동산 전세사기 법률 전문용어 단어사전을 각각 구축해서 사용자가 전세사기 수법에 속하는 심각성과 정도를 제약조건으로 처리하여 React구조로 만들어진 프론트화면에서 심각성의 정도를 알릴수 있게끔 관련 서비스 기능을 구현 하였습니다. analyze_fraud(messages_data) 함수를 이용하여 요청한 채팅 문자내용을 파이썬에서 제공하는 konlpy 라이브러리를 사용하여 Okt(Open Korea Text) 호출하여 한국어로 된 자연어와 텍스트로 되어있는 형태소를 처리합니다. Okt() 함수는 자연어처리를 분석하는 일종의 단어 분석기 역활을 하는 파이썬 함수입니다. 
  Okt()함수를 이용하여 자연어를 처리하면 analyze_fraud() 함수안에서 형태소분석을 마친 사용자가 입력한 메세지 내용은 tokens라는 메세지 text 변수에 담아 사기기수법 및 전세사기수법 행위등을 분석한'합체_사기범죄용어_사전'에 담긴 단어들을 명사, 형용사, 부사를 필터링하여 해당하는 사기행위의 심각성과 수위를 상, 중, 하 정도로 표시할 수 있게끔 하였고, analyze_fraud() 함수를 실행한 후 응답 받는 데이터를 JSON 데이터로 가지고와 (request.json.get(a))으로 데이터를 JSON 문자 타입으로 값을 반환하여 클라이언트 화면에서 해당 값을 응답 받을수 있도록 개발을 진행하였습니다. 
  프론트 앤드 처리는 JavaScript 언어로 기능을 처리를 하였습니다. 
  챗봇 메세지 기능 서비스의 테스트 서비스 개발과정과 그에 따른 기술파트 설명을 마치겠습니다. 
  감사합니다. 

  
  


  
  

  


   




   



